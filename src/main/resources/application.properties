# ============================================================
# APPLICATION SETTINGS
# ============================================================
spring.application.name=Koding Muda Belajar

# ============================================================
# DATABASE CONFIGURATION
# ============================================================
spring.datasource.url=jdbc:mysql://localhost:3306/koding_muda_belajar?useSSL=false&serverTimezone=Asia/Jakarta&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=Aa251020@
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# ============================================================
# MULTIPART / FILE UPLOAD CONFIGURATION
# ============================================================

# Enable multipart upload
spring.servlet.multipart.enabled=true

# Maksimal ukuran per file (500MB untuk video)
spring.servlet.multipart.max-file-size=500MB

# Maksimal ukuran total request
spring.servlet.multipart.max-request-size=500MB

# Threshold untuk menyimpan file ke disk (default 0 = langsung ke disk)
spring.servlet.multipart.file-size-threshold=0

# Lokasi temporary file
spring.servlet.multipart.location=${java.io.tmpdir}

# PENTING: Untuk Tomcat 10+/11, tambahkan max-swallow-size
server.tomcat.max-swallow-size=-1

# Max parameter count (untuk form dengan banyak field)
server.tomcat.max-parameter-count=10000

# ============================================================
# FILE STORAGE SETTINGS
# ============================================================

# Direktori utama untuk upload
app.upload.dir=uploads

# Sub-direktori
app.upload.thumbnails=thumbnails
app.upload.videos=videos
app.upload.documents=documents

# ============================================================
# SERVER CONFIGURATION
# ============================================================

# Port
server.port=8080

# Session timeout (10 menit)
server.servlet.session.timeout=600

# Connection timeout untuk upload besar
server.tomcat.connection-timeout=600000

# ============================================================
# THYMELEAF CONFIGURATION
# ============================================================
spring.thymeleaf.cache=false
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html

# ============================================================
# LOGGING
# ============================================================
logging.level.root=INFO
logging.level.koding_muda_nusantara=DEBUG
logging.level.org.springframework.web.multipart=DEBUG

server.tomcat.max-parameter-count=-1
server.tomcat.max-http-form-post-size=-1
server.tomcat.max-swallow-size=-1

spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=500MB
spring.servlet.multipart.max-request-size=500MB